#include <stdio.h>

struct funcionario{
    int matricula;
    float salario_b;
    char nome[41];
};

typedef struct funcionario funcionario;

void limpar_buffer();

int main(void){

    //declaração de variáveis
    int qtd_func, i;

    //Usuário informa quantos funcionários a empresa possui
    printf("Quantos funcionarios a empresa tem: ");
    scanf("%d", &qtd_func);

    funcionario funcionarios[qtd_func]; // lista que vai armazenar os funcionarios da empresa, com matricula, nome e salário

    //laço que preenche a lista criada logo acima
    for(i=0; i<qtd_func; i++){
        printf("Funcionario (%d)", i + 1);
        printf("\nMatricula: ");
        scanf("%d", &funcionarios[i].matricula);
        limpar_buffer();
        printf("Nome: ");
        fgets(funcionarios[i].nome, 41, stdin);
        printf("Salario Bruto: R$");
        scanf("%f", &funcionarios[i].salario_b);
        printf("\n");
    }
    
    printf("\n");
    printf("LISTA DE FUNCIONARIOS\n\n");

    //laço que exibe no terminal todos os funcionários cadastrados
    for(i=0; i<qtd_func; i++){
        printf("\nFuncionario: %s", funcionarios[i].nome);
        printf("\nMatricula: %d", funcionarios[i].matricula);
        printf("\nSalario Bruto: %.2f", funcionarios[i].salario_b);
        printf("\nDeducao INSS: %.2f", funcionarios[i].salario_b * 0.15);
        printf("\nSalario Liquido: %.2f", funcionarios[i].salario_b - (funcionarios[i].salario_b * 0.15));
        printf("\n");
    }
    return 0;
}

void limpar_buffer(){
    int c;
    while((c = getchar()) != '\n' && c != EOF)
		/* discard */ ;
}
